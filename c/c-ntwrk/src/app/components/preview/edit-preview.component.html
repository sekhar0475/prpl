<div class="modal-container">
  <div class="row">
    <div class="col-md-2">
      <h5 class="sub_heading"><strong>Preview For Edited Data</strong></h5>
    </div>
    <div class="col-md-3">
      <div class="row">
        <div class="col-md-6" (click)="sendEmail()">
          <p style="cursor: pointer !important;"><img class="preview_email_icon" src="../assets/images/envelope.png" alt="email">
            <strong>Email</strong></p>
        </div>
        <div class="col-md-6">
          <button
            style="cursor: pointer !important;width: 12rem;font-size: 2.8rem; border: none; background: transparent;left:0; top: 0.7rem; display: flex;"
            [useExistingCss]="true" printTitle="{{previewList?.companyName}}" printSectionId="previewContent" ngxPrint>
            <img alt="print" style="margin-right: 7px;" src="../assets/images/printer.png">
            <p style="font-weight: bold;">Print</p>
          </button>
        </div>
      </div>
    </div>
    <div class="col-md-1 col-md-offset-5 text-right">
      <button mat-button class="theme-button" (click)="submitContract()">Submit</button>
    </div>
  </div>
  <mat-icon class="modals_cancel_btn" (click)="onCloseEditPreview()">close</mat-icon>
  <hr class="border_row">
</div>
<section class="preview_sec preview_popup">
  <div id="previewContent" #previewContent>
    <div class="preview_main_card">
      <section class="preview_sec_1">
        <div class="row">
          <div class="col-md-6">
            <h3><strong>Network Associate Contract</strong></h3>
          </div>
          <div class="col-md-6 text-right">
            <h3>Preview Generated on: {{this.currDate | date: 'dd MMM yy'}}</h3>
          </div>
        </div>
      </section>
      <section class="preview_sec_2">
        <div class="row">
          <div class="col-md-6">
            <h3 class="font-thin break-word"><strong class="strong-text">Organisation Name:</strong> {{previewList?.companyName == null ? 'NA' : previewList?.companyName}}</h3>
            <h3 class="font-thin break-word"><strong class="strong-text">Associate Category:</strong> NETWORK</h3>
          </div>
          <div class="col-md-6">
            <div class="pull-right">
              <h3 class="font-thin break-word"><strong class="strong-text">Contract Code:</strong> {{previewList?.cntrCode == null ? 'NA' : previewList?.cntrCode}}</h3>
              <h3 class="font-thin break-word"><strong class="strong-text">W.E.F:</strong> {{previewList?.wefDate == null ? 'NA' : previewList?.wefDate | date: 'dd/MM/yyyy'}}</h3>
            </div>
          </div>
        </div>
      </section>
      <section class="preview_sec_3">
        <h3><strong>Contract Details</strong></h3>
        <div class="row">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Vehicle Type</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4 flex4">{{previewList?.vehicleType == null ? 'NA' : previewList?.vehicleType}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">End Date</div>
                <div class="mat-cell preview_table_bg_2 flex4 flex4">{{previewList?.expDt == null ? 'NA' : previewList?.expDt | date: 'dd/MM/yyyy'}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-md-offset-2">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Start Date</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">{{previewList?.effectiveDt == null ? 'NA' : previewList?.effectiveDt | date: 'dd/MM/yyyy'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">Billing Cycle</div>
                <div class="mat-cell preview_table_bg_2 flex4">{{previewList?.billingCyle == null ? 'NA' : previewList?.billingCyle}}</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!---------------- Route Allocation start -------------->
      <section class="preview_sec_3 preview_sec_4">
        <h3><strong>Allocation</strong></h3>
        <h3><strong>Route Allocation</strong></h3>
        <div class="row">
          <div class="col-md-12">
            <div class="mat-table prvw_tbl preview_table_2">
              <div class="mat-row align_item_top  border_none flex-box flex-box" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_head green_th flex2 width-200">ROUTE CODE</div>
                <div class="mat-cell pab_table_head green_th flex2 width-100">ROUTE SOURCE</div>
                <div class="mat-cell pab_table_head green_th flex3 width-100">ROUTE DESTINATION</div>
                <div class="mat-cell pab_table_head green_th flex4 width-100">TOUCHING POINT</div>
                <div class="mat-cell pab_table_head green_th flex5 width-100">MODE</div>
                <div class="mat-cell pab_table_head green_th flex6 width-200">VEHICLE ASSIGNED</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_dis1 flex2 pab_table_dis2 green_th width-200">
                  {{previewList?.routeAllocationPrev?.routeCode == null ? 'NA' : previewList?.routeAllocationPrev?.routeCode}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-100">
                  {{getBranchAddr(previewList?.routeAllocationPrev?.routeSourceId)}}
                </div>
                <div class="mat-cell pab_table_dis1 flex3 width-100">
                  {{getBranchAddr(previewList?.routeAllocationPrev?.routeDestinationId)}}
                </div>
                <div class="mat-cell pab_table_dis1 flex4 width-100">
                  {{previewList?.routeAllocationPrev?.touchingPointFlag == 1 ? 'YES' : 'NO'}}</div>
                <div class="mat-cell pab_table_dis1 flex5 width-100">
                  {{previewList?.routeAllocationPrev?.routeMode == null ? 'NA' : previewList?.routeAllocationPrev?.routeMode}}
                </div>
                <div class="mat-cell pab_table_dis1 flex5 width-200">
                  <ng-container
                    *ngFor="let vehicle of previewList?.routeAllocationPrev?.assignedVehicle; let i = index">
                    {{vehicle}} <span
                      *ngIf="i !== previewList?.routeAllocationPrev?.assignedVehicle.length-1">,</span>
                  </ng-container>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!---------------- Route Allocation end -------------->

      <!---------------- Commercial start -------------->
      <section class="preview_sec_3 preview_sec_4" *ngIf="previewList?.networkCommercialPrev.length > 0">
        <h3 style="page-break-inside: avoid;"><strong>Commercial</strong></h3>
        <ng-container *ngFor="let commercial of previewList?.networkCommercialPrev; let i=index">
          <h3 style="font-weight: bold; page-break-inside: avoid;"><strong>Schedule Creation For Route :
              {{previewRefList?.route?.routeCode == null ? 'NA' : previewRefList?.route?.routeCode}}</strong></h3>
          <div class="row payment_base_t" style="page-break-inside: avoid;">
            <div class="col-md-5">
              <div class="mat-table prvw_tbl  preview_table_1">
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Route</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{previewRefList?.route?.routeCode == null ? 'NA' : previewRefList?.route?.routeCode}}</div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Vehicle Assigned</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">
                    <ng-container *ngFor="let vehicle of commercial?.assignedVehicle; let j = index">
                      {{vehicle == null ? 'NA' : vehicle}} <span *ngIf="j !== commercial?.assignedVehicle.length-1">,</span>
                    </ng-container>
                  </div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Schedule Time</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{commercial?.scheduleTime == null ? 'NA' : commercial?.scheduleTime}}</div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Extra Departure</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{commercial?.extradept ? 'YES' : 'NO'}}</div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Start Date</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{commercial?.startDate == null ? 'NA' : commercial?.startDate | date: 'dd/MM/yyyy' }}</div>
                </div>
              </div>
            </div>
            <div class="col-md-5 col-md-offset-2">
              <div class="mat-table prvw_tbl  preview_table_1">
               
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Operational Days</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{getOperationalDays(commercial?.operationalDays)}}
                  </div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Transit Time</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">
                    <span *ngIf="commercial?.transitTime && commercial?.transitTime !== ''">{{commercial?.transitTime == null ? 'NA' : commercial?.transitTime}} HOURS</span> 
                      <span class="ml_mins" *ngIf="commercial?.transitTimeMins && commercial?.transitTimeMins !== ''">{{commercial?.transitTimeMins}} MINUTES </span>
                  </div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Extra Departure No.</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{commercial?.reason == null ? 'NA' : commercial?.reason}}</div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box">
                  <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>End Date</strong></div>
                  <div class="mat-cell preview_table_bg_2 flex4">{{commercial?.endDate == null ? 'NA' : commercial?.endDate | date: 'dd/MM/yyyy'}}</div>
                </div>
              </div>
            </div>
          </div>
          <h3 *ngIf="commercial?.routeDetails.length > 0"><strong>Route Details</strong></h3>
          <div class="row" *ngIf="commercial?.routeDetails.length > 0">
            <div class="col-md-12">
              <div class="mat-table prvw_tbl  preview_table_2">
                <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;">
                  <div class="mat-cell pab_table_head flex2 width-200"></div>
                  <div class="mat-cell pab_table_head flex2 width-100">ETA</div>
                  <div class="mat-cell pab_table_head flex2 width-200">WAITING TIME</div>
                  <div class="mat-cell pab_table_head flex4 width-100">TIME OF DEPARTURE</div>
                  <div class="mat-cell pab_table_head flex5 width-200">TRANSIT TIME</div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box"
                  *ngFor="let route of commercial?.sourceDetails; let i = index" style="page-break-inside: avoid;">
                  <div class="mat-cell pab_table_dis1 flex2 pab_table_dis2 width-200">{{route?.addrs == null ? 'NA' : route?.addrs}} (S)</div>
                  <div class="mat-cell pab_table_dis1 flex2 width-100"> - </div>
                  <div class="mat-cell pab_table_dis1 flex2 width-200"> - </div>
                  <div class="mat-cell pab_table_dis1 flex4 width-100">{{route?.departTime == null ? 'NA' : route?.departTime}}</div>
                  <div class="mat-cell pab_table_dis1 flex5 width-200">
                    <span *ngIf="route?.transitTime && route?.transitTime !== ''">{{route?.transitTime == null ? 'NA' : route?.transitTime}} HOURS</span> 
                      <span class="ml_mins" *ngIf="route?.transitTimeMins && route?.transitTimeMins !== ''">{{route?.transitTimeMins == null ? 'NA' : route?.transitTimeMins}} MINUTES </span>
                  </div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box"
                  *ngFor="let route of commercial?.transitionDetails; let j = index" style="page-break-inside: avoid;">
                  <div class="mat-cell pab_table_dis1 flex2 pab_table_dis2 width-200">{{route?.addrs == null ? 'NA' : route?.addrs}} (T{{j+1}})</div>
                  <div class="mat-cell pab_table_dis1 flex2 width-100">{{route?.eta == null ? 'NA' : route?.eta }}</div>
                  <div class="mat-cell pab_table_dis1 flex2 width-200">
                    <span *ngIf="route?.waitTime && route?.waitTime !== ''">{{route?.waitTime == null ? 'NA' : route?.waitTime}} HOURS</span> 
                    <span class="ml_mins" *ngIf="route?.waitTimeMins && route?.waitTimeMins !== ''">{{route?.waitTimeMins == null ? 'NA' : route?.waitTimeMins}} MINUTES </span>
                  </div>
                  <div class="mat-cell pab_table_dis1 flex4 width-100">{{route?.departTime == null ? 'NA' : route?.departTime}}</div>
                  <div class="mat-cell pab_table_dis1  width-200">
                    <span *ngIf="route?.transitTime && route?.transitTime !== ''">{{route?.transitTime == null ? 'NA' : route?.transitTime}} HOURS</span> 
                      <span class="ml_mins" *ngIf="route?.transitTimeMins && route?.transitTimeMins !== ''">{{route?.transitTimeMins == null ? 'NA' : route?.transitTimeMins}} MINUTES </span>
                  </div>
                </div>
                <div class="mat-row align_item_top  border_none flex-box"
                  *ngFor="let route of commercial?.destinationDetails; let k = index" style="page-break-inside: avoid;">
                  <div class="mat-cell pab_table_dis1 flex2 pab_table_dis2 width-200">{{route?.addrs == null ? 'NA' : route?.addrs}} (D)</div>
                  <div class="mat-cell pab_table_dis1 flex2 width-100">{{route?.eta == null ? 'NA' : route?.eta}}</div>
                  <div class="mat-cell pab_table_dis1 flex2 width-200"> - </div>
                  <div class="mat-cell pab_table_dis1 flex4 width-100"> - </div>
                  <div class="mat-cell pab_table_dis1 flex5 width-200"> - </div>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </section>

      <!---------------- Commercial end -------------->


      <!----------------  Payment terms start -------------->
      <section class="preview_sec_3 preview_sec_4" *ngIf="previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptId || previewList?.paymentTermsPrev?.mdmNotePadlist">
        <h3 style="page-break-inside: avoid;"><strong>Payment Terms</strong></h3>
        <div class="row" style="page-break-inside: avoid;">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Payout Rate By</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName == null ? 'NA' : previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName }}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">
                  <strong *ngIf="previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName == 'RATE PER KM'">Rate Per KM</strong>
                  <strong *ngIf="previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName=='ROUTE BASIS RATE'">Rate Per Route</strong>
                </div>
                <div class="mat-cell preview_table_bg_2 flex4">{{previewList?.paymentTermsPrev?.ratePerKm == null ? 'NA' : previewList?.paymentTermsPrev?.ratePerKm}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Base Fuel Date</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.paymentTermsPrev?.fuelBaseDt == null ? 'NA' : previewList?.paymentTermsPrev?.fuelBaseDt | date: 'dd/MM/yyyy'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>FLFC Clause</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">₹ {{previewList?.paymentTermsPrev?.flfcClause1 == null ? '0' : previewList?.paymentTermsPrev?.flfcClause1}} -
                  ₹ {{previewList?.paymentTermsPrev?.flfcClause2 == null ? '0' : previewList?.paymentTermsPrev?.flfcClause2}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Remarks</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">{{previewList?.paymentTermsPrev?.remarks ? previewList?.paymentTermsPrev?.remarks : 'NA' }}</div>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-md-offset-2">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Route Distance</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewRefList?.route?.routeDistKm == null ? 'NA' : previewRefList?.route?.routeDistKm}} KM</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Fuel Type</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.paymentTermsPrev?.lkpFuelType == null ? 'NA' : previewList?.paymentTermsPrev?.lkpFuelType}}
                </div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Base Fuel Index</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.paymentTermsPrev?.lkpFuelIndex}} - ₹ {{previewList?.paymentTermsPrev?.fuelBasePrice}}
                </div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Additional Expense</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.paymentTermsPrev?.addntlExpenseFlag == 1 ? 'YES' : 'NO'}}</div>
              </div>
            </div>
          </div>
        </div>

      </section>
      <section class="preview_sec_3 preview_sec_4 preview_sec_5" *ngIf="previewList?.paymentTermsPrev?.mdmNotePadlist && previewList?.paymentTermsPrev?.mdmNotePadlist.length > 0">
        <h3 style="page-break-inside: avoid;"><strong>Notepad Section</strong></h3>
        <div class="row">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_2" style="page-break-inside: avoid;">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell pab_table_head flex1">NOTEPAD NAME</div>
                <div class="mat-cell pab_table_head flex2">VALUE</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box"
                *ngFor="let notepad of previewList?.paymentTermsPrev?.mdmNotePadlist; let i = index" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_dis1 flex1 pab_table_dis2">{{notepad.notepadName == null ? 'NA' : notepad.notepadName}}</div>
                <div class="mat-cell pab_table_dis1 flex2">{{notepad.attributeValue  ? notepad.attributeValue : 'NA'}}</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <!---------- Deduction Start ---------------->
      <section class="preview_sec_3 preview_sec_4" *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt 
      || emiList.length > 0 || insuranceList.length > 0">
        <h3 style="page-break-inside: avoid;"><strong>Deductions</strong></h3>
        <div class="row payment_base_t" *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt" style="page-break-inside: avoid;">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>SLA Applicable</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.slaFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-md-offset-2">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Late Arrival Penalty</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.lateArrFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row"  *ngIf="previewList?.networkDeductionPrev?.lateArrFlag === 1 && previewList?.networkDeductionPrev?.lateArrivalDeductions.length > 0">
          <div class="col-md-12">
            <div class="mat-table prvw_tbl  preview_table_2">
              <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_head green_th flex2">VEHICLE TYPE</div>
                <div class="mat-cell pab_table_head green_th flex2">AMOUNT</div>
                <div class="mat-cell pab_table_head green_th flex2">MAX DEDUCTION</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box"
                *ngFor="let data of previewList?.networkDeductionPrev?.lateArrivalDeductions; let i = index" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_dis1 pab_table_dis2 flex2">{{data.vehicleType == null ? 'NA' : data.vehicleType}}</div>
                <div class="mat-cell pab_table_dis1 flex2">₹ {{data.amount == null ? '0' : data.amount }}</div>
                <div class="mat-cell pab_table_dis1 flex2">₹ {{data.maxDeductionCharges == null ? '0' : data.maxDeductionCharges}}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row payment_base_t" *ngIf="previewList?.networkDeductionPrev?.processChrgFlag" style="page-break-inside: avoid;">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th flex2"><strong>Payment Processing Charges</strong>
                </div>
                <div class="mat-cell preview_table_bg_2 flex4 flex2">
                  {{previewList?.networkDeductionPrev?.processChrgFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row payment_base_t" *ngIf="previewList?.networkDeductionPrev?.processChrgFlag" style="page-break-inside: avoid;">
          <div class="col-md-5" *ngIf="processChargeLeftArray.length > 0">
            <div class="mat-table prvw_tbl  preview_table_2">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell pab_table_head green_th flex2">RANGE OF FREIGHT</div>
                <div class="mat-cell pab_table_head green_th flex2">CHARGES (IN ₹)</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box"
                *ngFor="let charge of processChargeLeftArray; let i = index;">
                <div class="mat-cell pab_table_dis1 pab_table_dis2 flex2">{{charge?.attr1 == null ? 'NA' : charge?.attr1}} -
                  {{charge?.attr2 == null ? 'NA' : charge?.attr2 }}</div>
                <div class="mat-cell pab_table_dis1 flex2">₹ {{charge?.descr == null ? '0' : charge?.descr }}</div>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-md-offset-2" *ngIf="processChargeRightArray.length > 0">
            <div class="mat-table prvw_tbl  preview_table_2">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell pab_table_head green_th flex2">RANGE OF FREIGHT</div>
                <div class="mat-cell pab_table_head green_th flex2">CHARGES (IN ₹)</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box"
                *ngFor="let charge of processChargeRightArray; let i = index;">
                <div class="mat-cell pab_table_dis1 pab_table_dis2 flex2">{{charge?.attr1 == null ? 'NA' : charge?.attr1}} -
                  {{charge?.attr2 == null ? 'NA' : charge?.attr2}}</div>
                <div class="mat-cell pab_table_dis1 flex2">₹ {{charge?.descr == null ? '0' : charge?.descr }}</div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt" style="page-break-inside: avoid;">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Maximum Deduction Based On
                    Freight</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.maxFreightDedctnFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Seal Deduction Penalty</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">₹
                  {{previewList?.networkDeductionPrev?.sealDedctnAmt == null ? '0' : previewList?.networkDeductionPrev?.sealDedctnAmt}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Vehicle Absent Penalty</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.vehicleAbsentPnltyFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Loss of Material</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.lossMatFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Deduction Against Geofence
                    Broken</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.geoFenceDedctn === 1 ? 'Yes' : 'No'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box" *ngIf="previewList?.networkDeductionPrev?.gpsNotWorkDedctnFlag == 1">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong> Deduction Against GPS Amount</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  ₹ {{previewList?.networkDeductionPrev?.gpsNotWorkDedctnAmt == null ? '0' : previewList?.networkDeductionPrev?.gpsNotWorkDedctnAmt}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-md-offset-2">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Max Deduction</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">₹
                  {{previewList?.networkDeductionPrev?.maxFreightDedctnAmt == null ? '0' : previewList?.networkDeductionPrev?.maxFreightDedctnAmt}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Non-touching Penalty</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">₹
                  {{previewList?.networkDeductionPrev?.nonTchpntPnltyAmt == null ? '0' : previewList?.networkDeductionPrev?.nonTchpntPnltyAmt}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Deduction Against Market
                    Vehicle</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.mktVehicleDedctnFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Deduction Against Damage</strong>
                </div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.dmgFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th"><strong>Deduction Against GPS Not
                    Working</strong></div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.gpsNotWorkDedctnFlag === 1 ? 'Yes' : 'No'}}</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="preview_sec_3 preview_sec_4 preview_sec_5" *ngIf="emiList.length > 0">
        <h3 style="page-break-inside: avoid;"><strong>EMI Deduction Calculation</strong></h3>
        <div class="row" style="page-break-inside: avoid;">
          <div class="col-md-12">
            <div class="mat-table prvw_tbl  preview_table_2">
              <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_head green_th flex2 width-200">Vehicle No.</div>
                <div class="mat-cell pab_table_head green_th flex2 width-200">Emi Amount(Per Cycle)</div>
                <div class="mat-cell pab_table_head green_th flex2 width-100">Start Date</div>
                <div class="mat-cell pab_table_head green_th flex2 width-100">End Date</div>
                <div class="mat-cell pab_table_head green_th flex2 width-200">Route Code</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;" *ngFor="let vehicle of emiList; let i = index">
                <div class="mat-cell pab_table_dis1 pab_table_dis2 flex2 width-200">{{vehicle.vehicleNo == null ? 'NA' : vehicle.vehicleNo}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-200">₹ {{vehicle.amount == null ? '0' : vehicle.amount }}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-100">{{vehicle.startDate == null ? 'NA' : vehicle.startDate | date : "dd/MM/yyyy"}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-100">{{vehicle.endDate == null ? 'NA' : vehicle.endDate  | date : "dd/MM/yyyy"}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-200">{{vehicle.routeCode == null ? 'NA' : vehicle.routeCode}}</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="preview_sec_3 preview_sec_4 preview_sec_5" *ngIf="insuranceList.length > 0">
        <h3 style="page-break-inside: avoid;"><strong>Insurance Deduction Calculation</strong></h3>
        <div class="row">
          <div class="col-md-9">
            <div class="mat-table prvw_tbl  preview_table_2">
              <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;">
                <div class="mat-cell pab_table_head green_th flex2 width-200">Vehicle No.</div>
                <div class="mat-cell pab_table_head green_th flex2 width-200">Amount(Per Cycle)</div>
                <div class="mat-cell pab_table_head green_th flex2 width-100">Start Date</div>
                <div class="mat-cell pab_table_head green_th flex2 width-100">End Date</div>
                <div class="mat-cell pab_table_head green_th flex2 width-200">Route Code</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box" style="page-break-inside: avoid;" *ngFor="let vehicle of insuranceList; let i = index">
                <div class="mat-cell pab_table_dis1 pab_table_dis2 flex2 width-200">{{vehicle.vehicleNo == null ? 'NA' : vehicle.vehicleNo}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-200">₹ {{vehicle.amount == null ? '0' : vehicle.amount}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-100">{{vehicle.startDate == null ? 'NA' : vehicle.startDate  | date : "dd/MM/yyyy"}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-100">{{vehicle.endDate == null ? 'NA' : vehicle.endDate | date : "dd/MM/yyyy"}}</div>
                <div class="mat-cell pab_table_dis1 flex2 width-200">{{vehicle.routeCode == null ? 'NA' : vehicle.routeCode}}</div>
              </div>
            </div>
          </div>
        </div>
      </section>
      <section class="preview_sec_3 preview_sec_4 preview_sec_5" *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt">
        <h3 style="page-break-inside: avoid;"><strong>Advance Amount Applicable</strong></h3>
        <div class="row" style="page-break-inside: avoid;">
          <div class="col-md-5">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">Advance Amount Applicable</div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.advncDedctnAmtFlag ===1 ? 'YES' : 'NO'}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box"
                *ngIf="previewList?.networkDeductionPrev?.advncDedctnAmtFlag==1">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">Start Date</div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{previewList?.networkDeductionPrev?.advncDedctnAmtFromDt == null ? 'NA' : previewList?.networkDeductionPrev?.advncDedctnAmtFromDt | date : "dd/MM/yyyy"}}</div>
              </div>
            </div>
          </div>
          <div class="col-md-5 col-md-offset-2" *ngIf="previewList?.networkDeductionPrev?.advncDedctnAmtFlag==1">
            <div class="mat-table prvw_tbl  preview_table_1">
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">Advance Amount to be Deducted</div>
                <div class="mat-cell preview_table_bg_2 flex4">₹
                  {{previewList?.networkDeductionPrev?.advncDedctnAmt == null ? '0' : previewList?.networkDeductionPrev?.advncDedctnAmt}}</div>
              </div>
              <div class="mat-row align_item_top  border_none flex-box">
                <div class="mat-cell preview_table_bg_1 flex3 green_th">end Date</div>
                <div class="mat-cell preview_table_bg_2 flex4">
                  {{(previewList?.networkDeductionPrev?.advncDedctnAmtToDt) ? (previewList?.networkDeductionPrev?.advncDedctnAmtToDt | date : "dd/MM/yyyy") : ''}}
                </div>
              </div>
            </div>
          </div>
        </div>
        <hr class="billingHr">
      </section>
    </div>








<!-- for print only naresh -->
<div class="previewHeading" style=" display: none;" id="printing">
  <h2>Network Associate Contract</h2>
  <!-- customer details -->
  <table aria-describedby="table" class="table_edit" id="Network Associate Contract">
    <tbody>
      <tr>
        <th scope="col" style="width:400px">-</th>
        <th scope="col" style="width:400px">--</th>
      </tr>
      <tr>
        <td style="width:400px">Organisation Name: {{previewList?.companyName == null ? 'NA' : previewList?.companyName}}</td>
        <td style="width:400px"> Contract Code: {{previewList?.cntrCode == null ? 'NA' : previewList?.cntrCode}}</td>
       
      </tr>
      <tr>
        <td style="width:400px">Associate Category:NETWORK </td>
        <td style="width:400px"> W.E.F: {{previewList?.wefDate == null ? 'NA' : previewList?.wefDate  | date: 'dd/MM/yyyy'}} </td>
      </tr>
    </tbody>
  </table>
  <!-- end customer details -->







  <!-- Contract Details -->
  <table aria-describedby="table" class="table_edit fourCol" id="Contract Details">
    <tbody>
      <tr>
        <th scope="col" style="width:400px">-</th>
        <th scope="col" style="width:400px">--</th>
        <th scope="col" style="width:400px">---</th>
        <th scope="col" style="width:400px">----</th>
      </tr>

      <tr>
        <td>Vehicle Type</td>
        <td>{{previewList?.vehicleType == null ? 'NA' : previewList?.vehicleType}}</td>

        <td ><strong>Start Date</strong></td>
        <td >{{previewList?.effectiveDt == null ? 'NA' : previewList?.effectiveDt | date: 'dd/MM/yyyy'}}</td>
       
      </tr>




     


      <tr>
        <td>End Date</td>
        <td>{{previewList?.expDt == null ? 'NA' : previewList?.expDt | date: 'ddd/MM/yyyy'}}</td>
        
        <td >Billing Cycle</td>
        <td >{{previewList?.billingCyle == null ? 'NA' : previewList?.billingCyle}}</td> 
      </tr>


   
    </tbody>
  </table>
    <!-- end Contract Details -->










          <!--------- Route Allocation Start ---------->
          <table aria-describedby="table" class="table_edit sixCol" id="Allocation" data-h5="Route Allocation"  data-heading="show" >
            <tbody>
              <tr>
                <th scope="col" style="width:400px">ROUTE CODE</th>
                <th scope="col" style="width:400px">ROUTE SOURCE</th>
                <th scope="col" style="width:400px">ROUTE DESTINATION</th>

                <th scope="col" style="width:400px">TOUCHING POINT</th>
                <th scope="col" style="width:400px">MODE</th>
                <th scope="col" style="width:400px">VEHICLE ASSIGNED</th>
              </tr>
        
              <tr >
                <td> {{previewList?.routeAllocationPrev?.routeCode == null ? 'NA' : previewList?.routeAllocationPrev?.routeCode}}</td>
                <td> {{getBranchAddr(previewList?.routeAllocationPrev?.routeSourceId)}}</td>
                <td> {{getBranchAddr(previewList?.routeAllocationPrev?.routeDestinationId)}}</td>
                <td> {{previewList?.routeAllocationPrev?.touchingPointFlag == 1 ? 'YES' : 'NO'}}</td>
                <td> {{previewList?.routeAllocationPrev?.routeMode == null ? 'NA' : previewList?.routeAllocationPrev?.routeMode}}</td>
                <td>
                  <ng-container
                    *ngFor="let vehicle of previewList?.routeAllocationPrev?.assignedVehicle; let i = index">
                    {{vehicle == null ? 'NA' : vehicle}} <span *ngIf="i !== previewList?.routeAllocationPrev?.assignedVehicle.length-1">,</span>
                  </ng-container>
                </td>
              </tr>
            </tbody>
          </table>

           <!--------- Route Allocation End ---------->











 <!---------------- Commercial start -------------->
 <section  *ngIf="previewList?.networkCommercialPrev.length > 0">
  
  
  
  <ng-container *ngFor="let commercial of previewList?.networkCommercialPrev; let i=index">


          <table aria-describedby="table" class="table_edit fourCol h5"  id="Schedule Creation For Route : {{previewRefList?.route?.routeCode}}">
          <tbody>
            <tr>
              <th scope="col" style="width:400px">-</th>
              <th scope="col" style="width:400px">--</th>
              <th scope="col" style="width:400px">---</th>
              <th scope="col" style="width:400px">----</th>
            </tr>
            <tr>
              <td>Route</td>
              <td>{{previewRefList?.route?.routeCode == null ? 'NA' : previewRefList?.route?.routeCode}}</td>
              <td>Operational Days</td>
              <td>{{getOperationalDays(commercial?.operationalDays)}}</td>
            </tr>
            <tr>
              <td>Vehicle Assigned</td>
              <td>
                <ng-container *ngFor="let vehicle of commercial?.assignedVehicle; let j = index"> {{vehicle == null ? 'NA' : vehicle}} <span
                    *ngIf="j !== commercial?.assignedVehicle.length-1">,</span>
                </ng-container>
              </td>

              <td>Transit Time</td>
              <td> <span *ngIf="commercial?.transitTime && commercial?.transitTime !== ''">{{commercial?.transitTime == null ? 'NA' : commercial?.transitTime}}
                  HOURS</span>
                <span
                  *ngIf="commercial?.transitTimeMins && commercial?.transitTimeMins !== ''">{{commercial?.transitTimeMins == null ? 'NA' : commercial?.transitTimeMins}}
                  MINUTES </span>
                </td>
            </tr>

            <tr>
              <td>Schedule Time</td>
              <td>{{commercial?.scheduleTime == null ? 'NA' : commercial?.scheduleTime}}</td>
                <td>Extra Departure No.</td>
                <td>{{commercial?.reason == null ? 'NA' : commercial?.reason}}</td>
            
            </tr>


            <tr>
              
                <td>Extra Departure</td>
                <td>{{commercial?.extradept ? 'YES' : 'NO'}}</td>

                <td>Start Date</td>
                <td>{{commercial?.startDate == null ? 'NA' : commercial?.startDate | date: 'dd/MM/yyyy' }}</td>
            </tr>

            <tr>
            

                  <td>End Date</td>
                  <td>{{commercial?.endDate == null ? 'NA' : commercial?.endDate | date: 'dd/MM/yyyy'}}</td>
                  <td></td>
                  <td></td>

            </tr>

      
          </tbody>
        </table>

        <table aria-describedby="table" *ngIf="commercial?.routeDetails.length > 0" class="table_edit fiveCol h5" id="Route Details" data-heading="show">
          <tbody>
            <tr>
              <th></th>
              <th scope="col" style="width:400px">ETA</th>
              <th scope="col" style="width:400px">WAITING TIME</th>
              <th scope="col" style="width:400px">TIME OF DEPARTURE</th>
              <th scope="col" style="width:400px">TRANSIT TIME</th>
            </tr>
            <tr *ngFor="let route of commercial?.sourceDetails; let i = index">
              <td>{{route?.addrs == null ? 'NA' : route?.addrs}} (S)</td>
              <td>-</td>
              <td>-</td>
              <td>{{route?.departTime == null ? 'NA' : route?.departTime}}</td>
              <td>
              <span *ngIf="route?.transitTime && route?.transitTime !== ''">{{route?.transitTime == null ? 'NA' : route?.transitTime}} HOURS</span>
              <span *ngIf="route?.transitTimeMins && route?.transitTimeMins !== ''">{{route?.transitTimeMins == null ? 'NA' : route?.transitTimeMins}} MINUTES </span>
              </td>
            </tr>



            <tr *ngFor="let route of commercial?.transitionDetails; let j = index">
              <td>{{route?.addrs == null ? 'NA' : route?.addrs}} (T{{j+1}})</td>
              <td>{{route?.eta == null ? 'NA' : route?.eta}}</td>

              <td>
                <span *ngIf="route?.waitTime && route?.waitTime !== ''">{{route?.waitTime == null ? 'NA' : route?.waitTime}} HOURS</span>
                <span *ngIf="route?.waitTimeMins && route?.waitTimeMins !== ''">{{route?.waitTimeMins == null ? 'NA' : route?.waitTimeMins}} MINUTES </span>
              </td>
              <td>{{route?.departTime == null ? 'NA' : route?.departTime}}</td>
              <td>
                  <span *ngIf="route?.transitTime && route?.transitTime !== ''">{{route?.transitTime == null ? 'NA' : route?.transitTime}} HOURS</span>
                  <span *ngIf="route?.transitTimeMins && route?.transitTimeMins !== ''">{{route?.transitTimeMins == null ? 'NA' : route?.transitTimeMins}}
                    MINUTES </span>
              </td>
            </tr>

            <tr *ngFor="let route of commercial?.destinationDetails; let k = index">
                <td>{{route?.addrs == null ? 'NA' : route?.addrs}} (D)</td>
                <td>{{route?.eta == null ? 'NA' : route?.eta}}</td>
                <td> - </td>
                <td> - </td>
                <td> - </td>
            </tr>
          </tbody>
        </table>




    </ng-container>
  </section>
  <!---------------- Commercial end -------------->












   <!--------- Payment Terns Start ---------->
   <section  *ngIf="previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptId || previewList?.paymentTermsPrev?.mdmNotePadlist">

       <table aria-describedby="table" class="table_edit fourCol" id="Payment Terms">
         <tbody>
           <tr>
             <th scope="col" style="width:400px">-</th>
             <th scope="col" style="width:400px">--</th>
             <th scope="col" style="width:400px">---</th>
             <th scope="col" style="width:400px">----</th>
           </tr>
           <tr>
             <td>Payout Rate By</td>
             <td> {{previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName == null ? 'NA' : previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName}}</td>
            
             <td>Route Distance</td>
             <td>{{previewRefList?.route?.routeDistKm == null ? 'NA' : previewRefList?.route?.routeDistKm}} KM</td>
         
         
         
         
           </tr>


           <tr>
              <td> <strong *ngIf="previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName == 'RATE PER KM'">Rate Per
                  KM</strong>
                <strong *ngIf="previewList?.paymentTermsPrev?.lkpAssocNrmPayoutOptName=='ROUTE BASIS RATE'">Rate Per
                  Route</strong></td>
              <td>{{previewList?.paymentTermsPrev?.ratePerKm == null ? 'NA' : previewList?.paymentTermsPrev?.ratePerKm}}</td>

            <td>Fuel Type</td>
            <td> {{previewList?.paymentTermsPrev?.lkpFuelType == null ? 'NA' :previewList?.paymentTermsPrev?.lkpFuelType}}</td>
           </tr>




           <tr>
             <td>Base Fuel Date</td>
             <td> {{previewList?.paymentTermsPrev?.fuelBaseDt == null ? 'NA' : previewList?.paymentTermsPrev?.fuelBaseDt | date: 'dd/MM/yyyy'}}</td>

          <td>Base Fuel Index</td>
          <td> {{previewList?.paymentTermsPrev?.lkpFuelIndex}} - RS. {{previewList?.paymentTermsPrev?.fuelBasePrice}}
          </td>
           </tr>





           


           <tr>
                <td>FLFC Clause</td>
                <td> {{previewList?.paymentTermsPrev?.flfcClause1}} - RS.
                  {{previewList?.paymentTermsPrev?.flfcClause2}}</td>


                      <td>Additional Expense</td>
                      <td> {{previewList?.paymentTermsPrev?.addntlExpenseFlag == 1 ? 'YES' : 'NO'}}</td>

           

           </tr>


             <tr>

             <td>Remarks</td>
             <td>{{previewList?.paymentTermsPrev?.remarks ? previewList?.paymentTermsPrev?.remarks : 'NA'}}</td>
               <td></td>
               <td></td>
         
           

    
         

       
           </tr>
         </tbody>
       </table>

        
             <table aria-describedby="table" class="table_edit fourCol h5" id="Notepad Section" data-heading="show">
               <tbody>
                 <tr>
                   <th scope="col" style="width:400px">NOTEPAD NAME</th>
                   <th scope="col" style="width:400px">VALUE</th>
                 </tr>
                 <tr *ngFor="let notepad of previewList?.paymentTermsPrev?.mdmNotePadlist; let i = index">
                   <td>{{notepad.notepadName == null ? 'NA' : notepad.notepadName}}</td>
                   <td>{{notepad.attributeValue == null ? 'NA' : notepad.attributeValue}}</td>
                 </tr>
               </tbody>
             </table>
       </section>
    <!--------- end Payment Terns Start ---------->
     

      <!-- Deduction Start -->

      <section  *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt  || emiList.length > 0 || insuranceList.length > 0">


      <table aria-describedby="table" class="table_edit fourCol" id="Deductions" data-page="newPage"  *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt">
        <tbody>
          <tr>
            <th scope="col" style="width:400px">-</th>
            <th scope="col" style="width:400px">--</th>
            <th scope="col" style="width:400px">---</th>
            <th scope="col" style="width:400px">----</th>
          </tr>
          <tr>
            <td>SLA Applicable</td>
            <td> {{previewList?.networkDeductionPrev?.slaFlag === 1 ? 'Yes' : 'No'}}</td>
            <td>Late Arrival Penalty</td>
            <td> {{previewList?.networkDeductionPrev?.lateArrFlag === 1 ? 'Yes' : 'No'}}</td>
          </tr>
        </tbody>
      </table>
      <!-- end Deduction Start -->






  
   
        <table aria-describedby="table"  class="table_edit threeCol" data-heading="show"
        *ngIf="previewList?.networkDeductionPrev?.lateArrFlag === 1 && previewList?.networkDeductionPrev?.lateArrivalDeductions.length > 0">
          <tbody>
            <tr>
              <th scope="col">VEHICLE TYPE</th>
              <th scope="col">AMOUNT</th>
              <th scope="col">MAX DEDUCTION</th>
            </tr>
            <tr *ngFor="let data of previewList?.networkDeductionPrev?.lateArrivalDeductions; let i = index">
                  <td>{{data.vehicleType == null ? 'NA' : data.vehicleType}}</td>
                  <td>RS. {{data.amount == null ? 'NA' : data.amount}}</td>
                  <td>RS. {{data.maxDeductionCharges == null ? 'NA' : data.maxDeductionCharges}}</td>
            </tr>
          </tbody>
        </table>
    




     
        <table aria-describedby="table" class="table_edit fourCol h5" *ngIf="previewList?.networkDeductionPrev?.processChrgFlag">
          <tbody>
            <tr>
              <th scope="col" >-</th>
              <th scope="col" >-</th>
              <th scope="col" >--</th>
              <th scope="col" >---</th>
            </tr>
            <tr>
                <td>Payment Processing Charges</td>
                <td> {{previewList?.networkDeductionPrev?.processChrgFlag === 1 ? 'Yes' : 'No'}}</td>
                <td ></td>
                <td ></td>
            </tr>
          </tbody>
        </table>
       


   
        <table aria-describedby="table" class="table_edit fourCol" data-heading="show" *ngIf="previewList?.networkDeductionPrev?.processChrgFlag">
          <tbody>
            <tr>
              <th scope="col">RANGE OF FREIGHT</th>
              <th scope="col">CHARGES (IN RS.)</th>              
            </tr>


        
              <tr *ngFor="let charge of previewList?.networkDeductionPrev?.networkProcessCharges; let i = index;">
                <td>{{charge?.attr1 == null ? 'NA' : charge?.attr1}} - {{charge?.attr2 == null ? 'NA' : charge?.attr2}}</td>
                <td>Rs. {{charge?.descr == null ? 'NA' : charge?.descr}}</td>
                <td></td>
                <td></td>
              </tr>     
              
        
          </tbody>
      </table>
   


      
        <!-- Promotion applicable -->
        <table aria-describedby="table" class="table_edit fourCol" *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt" >
          <tbody>
            <tr>
              <th scope="col" >-</th>
              <th scope="col" >--</th>
              <th scope="col" >--</th>
              <th scope="col" >-</th>
             
            </tr>
            <tr >
              <td>Maximum Deduction Based On Freight</td>
              <td> {{previewList?.networkDeductionPrev?.maxFreightDedctnFlag === 1 ? 'Yes' : 'No'}}</td>

              <td>Seal Deduction Penalty</td>
              <td>RS. {{previewList?.networkDeductionPrev?.sealDedctnAmt == null ? 'NA' : previewList?.networkDeductionPrev?.sealDedctnAmt}}</td>
            </tr>

            <tr >
                <td>Vehicle Absent Penalty</td>
                <td> {{previewList?.networkDeductionPrev?.vehicleAbsentPnltyFlag === 1 ? 'Yes' : 'No'}}</td>
            
              <td>Loss of Material</td>
              <td> {{previewList?.networkDeductionPrev?.lossMatFlag === 1 ? 'Yes' : 'No'}}</td>
            </tr>

            <tr>
              <td>Deduction Against Geofence Broken</td>
              <td> {{previewList?.networkDeductionPrev?.geoFenceDedctn === 1 ? 'Yes' : 'No'}}</td>

              <td>
                  <div *ngIf="previewList?.networkDeductionPrev?.gpsNotWorkDedctnFlag == 1">
                    <div><strong> Deduction Against GPS Amount</strong></div>
                 
                  </div>
              </td>
              <td>
                  <div *ngIf="previewList?.networkDeductionPrev?.gpsNotWorkDedctnFlag == 1">
                    <div> RS. {{previewList?.networkDeductionPrev?.gpsNotWorkDedctnAmt == null ? 'NA' : previewList?.networkDeductionPrev?.gpsNotWorkDedctnAmt}}</div>
                  </div>
              </td>
            </tr>
          

            <tr>
              <td>Max Deduction</td>
              <td>RS. {{previewList?.networkDeductionPrev?.maxFreightDedctnAmt == null ? 'NA' : previewList?.networkDeductionPrev?.maxFreightDedctnAmt}}</td>

              <td>Non-touching Penalty</td>
              <td>RS. {{previewList?.networkDeductionPrev?.nonTchpntPnltyAmt == null ? 'NA' : previewList?.networkDeductionPrev?.nonTchpntPnltyAmt}}</td>
            </tr>

            <tr>
              <td>Deduction Against Market Vehicle</td>
              <td> {{previewList?.networkDeductionPrev?.mktVehicleDedctnFlag === 1 ? 'Yes' : 'No'}}</td>

              <td>Deduction Against Damage</td>
              <td> {{previewList?.networkDeductionPrev?.dmgFlag === 1 ? 'Yes' : 'No'}}</td>
            </tr>
        
          </tbody>
        </table>
 
</section>
      

     

        <table aria-describedby="table" class="table_edit fiveCol" id="EMI Deduction Calculation"
         *ngIf="emiList.length > 0">
          <tbody>
            <tr>
              <th scope="col" style="width:400px">Vehicle No.</th>
              <th scope="col" style="width:400px">Emi Amount(Per Cycle)</th>
              <th scope="col" style="width:400px">Start Date</th>
              <th scope="col" style="width:400px">End Date</th>
              <th scope="col" style="width:400px">Route Code</th>
            </tr>
      
            <tr *ngFor="let vehicle of emiList; let i = index">
              <td >{{vehicle.vehicleNo == null ? 'NA' : vehicle.vehicleNo}}</td>
              <td>Rs. {{vehicle.amount == null ? 'NA' : vehicle.amount}}</td>
              <td>{{vehicle.startDate == null ? 'NA' : vehicle.startDate | date : "dd/MM/yyyy"}}</td>
              <td>{{vehicle.endDate == null ? 'NA' : vehicle.endDate | date : "dd/MM/yyyy"}}</td>
              <td>{{vehicle.routeCode == null ? 'NA' : vehicle.routeCode}}</td>
            </tr>
          </tbody>
        </table>


        <table *ngIf="insuranceList.length > 0"  aria-describedby="table" class="table_edit threeCol" id="Insurance Deduction Calculation"
          >
          <tbody>
            <tr>
               <th scope="col">Vehicle No.</th>
               <th scope="col">Amount(Per Cycle)</th>
               <th scope="col">Start Date</th>
               <th scope="col">End Date</th>
               <th scope="col">Route Code</th>
            </tr>
      
            <tr *ngFor="let vehicle of insuranceList; let i = index">
              <td >{{vehicle.vehicleNo == null ? 'NA' : vehicle.vehicleNo}}</td>
              <td>Rs. {{vehicle.amount == null ? 'NA' : vehicle.amount}}</td>
              <td>{{vehicle.startDate == null ? 'NA' : vehicle.startDate | date : "dd/MM/yyyy"}}</td>
              <td>{{vehicle.endDate == null ? 'NA' : vehicle.endDate | date : "dd/MM/yyyy"}}</td>
              <td>{{vehicle.routeCode == null ? 'NA' : vehicle.routeCode}}</td>
            </tr>
          </tbody>
        </table>


        <table aria-describedby="table" class="table_edit fourCol h5" id="Advance Amount Applicable" *ngIf="previewList?.networkDeductionPrev?.sealDedctnAmt">
          <tbody>
            <tr>
              <th scope="col" style="width:400px">-</th>
              <th scope="col" style="width:400px">-</th>
              <th scope="col" style="width:400px">--</th>
              <th scope="col" style="width:400px">--</th>
            </tr>
      
            <tr>              
                <td>Advance Amount Applicable</td>
                <td> {{previewList?.networkDeductionPrev?.advncDedctnAmtFlag ===1 ? 'YES' : 'NO'}}</td>

                <td>
                       <div *ngIf="previewList?.networkDeductionPrev?.advncDedctnAmtFlag==1"> Start Date </div>

                </td>
                <td>
                     <div *ngIf="previewList?.networkDeductionPrev?.advncDedctnAmtFlag==1"> {{previewList?.networkDeductionPrev?.advncDedctnAmtFromDt == null ? 'NA' : previewList?.networkDeductionPrev?.advncDedctnAmtFromDt | date : "dd/MM/yyyy"}} </div>
                </td>
             
            </tr>


           
            
            <tr *ngIf="previewList?.networkDeductionPrev?.advncDedctnAmtFlag==1">
              <td>Start Date</td>
              <td>{{previewList?.networkDeductionPrev?.advncDedctnAmtFromDt == null ? 'NA' : previewList?.networkDeductionPrev?.advncDedctnAmtFromDt | date : "dd/MM/yyyy"}}</td>

              <td></td>
              <td></td>
            </tr>



            <tr *ngIf="previewList?.networkDeductionPrev?.advncDedctnAmtFlag==1">
              <td>Advance Amount to be Deducted</td>
              <td>RS. {{previewList?.networkDeductionPrev?.advncDedctnAmt == null ? 'NA' : previewList?.networkDeductionPrev?.advncDedctnAmt}}</td>
            
               <td>end Date</td>
               <td> {{(previewList?.networkDeductionPrev?.advncDedctnAmtToDt) ? (previewList?.networkDeductionPrev?.advncDedctnAmtToDt | date : "dd/MM/yyyy") : ''}}</td>
            </tr>
          </tbody>
        </table>
   









          
              




        <!-- end deduction -->







</div>









